<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hangman</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
</head>

<body style="background-image: url(https://i.imgur.com/XG3Hn0M.jpg)">

    <!-- <body> -->
    <!-- <img src="http://www.thenerdmentality.com/wp-content/uploads/2018/01/HangmanFeat.png" style="width: 100%; height: 300px; "> -->
    <div class="card text-center" style="width: 18rem;">
        <img class="card-img-top" src="http://11points.com/wp-content/uploads/2012/09/dominatehangman-1600.jpg" alt="Card image cap">
        <div class="card-body">
            <h5 class="card-title">You have 13 guesses to guess the word!</h5>
            <p class="card-text">
                <p id="win">Wins: 0</p>
                <p id="loss">Losses: 0</p>
                <p id="guess">Guesses Remaining: 13</p>
                <!-- <p id="lives">Lives Remaining: 5</p> -->
                <p id="userGuess">Word: </p>
                <p id="lettersUsed">Letters Used: </p>
            </p>
            <a href="#" class="btn btn-primary">Play</a>
        </div>
    </div>

    <script>
        //Different hangman words
        var cars = ["auto", "automobile", "buggy", "car", "cloth-top", "compact", "convertible", "coupe", "cruiser", "dragster", "electric car", "four wheel drive", "gas electric", "hard top", "hybrid", "jeep", "limo", "limousine", "luxury car", "patrol car", "minivan", "patrol car", "race car", "roadster", "sedan", "sports car", "SUV", "taxi", "taxi car", "van"];
        //Computer generated random word
        var lettersUsed = [];
        //The starting string at the beginning of the game
        var guessedArray = "", displayArray = "";
        var win = 0, loss = 0, guessesRemaining = 13;

        function updateWins(win) {

            document.getElementById("guess").innerHTML = "Guesses Remaining: " + guessesRemaining;
            win = win + 1;
            document.getElementById("win").innerHTML = "Won: " + win;
            console.log("Letters: " + Letters);
            console.log("Letters Used: " + lettersUsed);
            refreshGame();
            console.log("Letters: " + Letters);
            console.log("Letters Used: " + lettersUsed);
            return win;
        }

        function updateLoss(loss) {

            document.getElementById("guess").innerHTML = "Guesses Remaining: " + guessesRemaining;
            loss++;
            document.getElementById("loss").innerHTML = "Lost: " + loss;
            refreshGame();
            console.log("Letters: " + Letters);
            console.log("Letters Used: " + lettersUsed);
            return loss;
        }

        function refreshGame() {
            //initializeGuessedArray();
            Letters = "Letters Used: ";
            lettersUsed = [];
            document.getElementById("lettersUsed").innerHTML = Letters;
            guessesRemaining = 13;
            document.getElementById("guess").innerHTML = "Guesses Remaining: " + guessesRemaining;
            guessedArray = "";
            computerWord = cars[Math.floor(Math.random() * cars.length)+1].toLowerCase();
            for (var i = 0; i < computerWord.length; ++i) {

                if (/[a-zA-Z]/.test(computerWord[i])) {
                    guessedArray += '_';
                    displayArray += '_ ';
                }
                else {
                    guessedArray += computerWord[i];
                    displayArray += computerWord[i] + " ";
                }

            };
            document.getElementById("userGuess").innerHTML = "Word: " + displayArray;
            console.log("Computer Word: " + computerWord);
        }

        
        refreshGame();
        document.onkeyup = function (element) {
            var userKey = element.key;
            //Pushing guessed letters and pushes letters only if they are unique into lettersUsed array and are alphabets
            if (/[a-zA-Z]/.test(userKey) && lettersUsed.indexOf(userKey) === -1) {
                lettersUsed.push(userKey);
                Letters += userKey + ", ";
                document.getElementById("lettersUsed").innerHTML = Letters;

                if (computerWord.indexOf(userKey) >= 0) {
                    for (var i = 0; i < computerWord.length; ++i) {
                        if (userKey === computerWord[i]) {
                            var newGuessedArray = guessedArray.slice(0, i) + userKey + guessedArray.slice(i + 1, guessedArray.length);
                            guessedArray = newGuessedArray;
                            var displayArray = "";
                            for(var j = 0; j < newGuessedArray.length; ++j){
                                displayArray += newGuessedArray[j] + " ";
                            }
                            document.getElementById("userGuess").innerHTML = "Word: " + displayArray;
                        }
                    }
                    if (guessedArray.indexOf("_") === -1) {
                        win = updateWins(win);
                    }
                }
                else {
                    guessesRemaining--;
                    document.getElementById("guess").innerHTML = "Guesses Remaining: " + guessesRemaining;
                    if (guessesRemaining === 0) {
                        loss = updateLoss(loss);
                    }
                }
            }
        };
    </script>
</body>

</html>