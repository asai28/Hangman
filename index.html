<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hangman</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Creepster" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Butcherman|Nosifer" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Markazi+Text" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/style.css" type="text/css">
</head>

<body style="background-image: url(http://myclone.files.wordpress.com/2011/02/home-hangman-photoshopped.jpg)">
    <audio src="assets/creepy.mp3" loop = "true"></audio>
    <div class="container">
        <div class="row">
            <div class="container mt-5 col-lg-2">
                <div id="victory">
                    <img src="assets/images/hangman10.gif">Congratulations! You saved me</div>
                <div id="defeat">
                    <img src="assets/images/hangman09.gif">Oh no! You just killed me</div>
            </div>
            <div class="card text-center mt-5 ml-5 col-lg-8 bg-dark text-light" style="width: 18rem; ">
                <img class="card-img-top" src="http://www.magma.ca/~cagraha/textures/hangman.jpg" alt="Card image cap">
                <div class="card-body">
                    <h2 class="card-title">You have 13 guesses to guess the word! Be ready to be spooked out.</h2>
                    <p class="card-text">
                        <p id="win">Wins: 0</p>
                        <p id="loss">Losses: 0</p>
                        <p id="guess">Guesses Remaining: 13</p>
                        <!-- <p id="lives">Lives Remaining: 5</p> -->
                        <p id="userGuess">Word: </p>
                        <p id="lettersUsed">Letters Used: </p>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        //Different hangman words
        var cars = ["alarming", "chilling", "creepy", "eerie", "hairy", "horrifying", "intimidating", "shocking", "spooky", "bloodcurdling", "hair-raising", "horrendous", "unnerving", "spine-chilling", "bloodcurdling"];
        //Computer generated random word
        var lettersUsed = [];
        //The starting string at the beginning of the game
        var guessedArray = "", displayArray = "";
        var win = 0, loss = 0, guessesRemaining = 13;
        
        function showVictoryImage() {
            document.getElementById("victory").style.visibility = "initial";
        }

        function showDefeatImage() {
            document.getElementById("defeat").style.visibility = "initial";
        }

        function hideVictoryImage() {
            document.getElementById("victory").style.visibility = "hidden";
        }

        function hideDefeatImage() {
            document.getElementById("defeat").style.visibility = "hidden";
        }

        function updateWins(win) {

            document.getElementById("guess").innerHTML = "Guesses Remaining: " + guessesRemaining;
            win = win + 1;
            document.getElementById("win").innerHTML = "Won: " + win;
            document.getElementById("victory").setAttribute("id", "victory");
            showVictoryImage();
            setTimeout(hideVictoryImage, 5000);
            setTimeout(hideDefeatImage, 5000);
            refreshGame();
            return win;
        }

        function updateLoss(loss) {

            document.getElementById("guess").innerHTML = "Guesses Remaining: " + guessesRemaining;
            loss++;
            document.getElementById("loss").innerHTML = "Lost: " + loss;
            showDefeatImage();
            setTimeout(hideVictoryImage, 5000);
            setTimeout(hideDefeatImage, 5000);
            refreshGame();
            return loss;
        }

        function refreshGame() {
            Letters = "Letters Used: ";
            lettersUsed = [];
            document.getElementById("lettersUsed").innerHTML = Letters;
            guessesRemaining = 13;
            document.getElementById("guess").innerHTML = "Guesses Remaining: " + guessesRemaining;
            guessedArray = "";
            displayArray = "";
            computerWord = cars[Math.floor(Math.random() * cars.length) + 1].toLowerCase();
            for (var i = 0; i < computerWord.length; ++i) {

                if (/[a-zA-Z]/.test(computerWord[i])) {
                    guessedArray += '_';
                    displayArray += '_ ';
                }
                else {
                    guessedArray += computerWord[i];
                    displayArray += computerWord[i] + " ";
                }

            };
            document.getElementById("userGuess").innerHTML = "Word: " + displayArray;
            document.getElementsByClassName("card-img-top").src = "http://11points.com/wp-content/uploads/2012/09/dominatehangman-1600.jpg";
        }


        refreshGame();
        hideVictoryImage();
        hideDefeatImage();
        document.onkeyup = function (element) {
            var userKey = element.key;
            //Pushing guessed letters and pushes letters only if they are unique into lettersUsed array and are alphabets
            if (/[a-zA-Z]/.test(userKey) && lettersUsed.indexOf(userKey) === -1) {
                lettersUsed.push(userKey);
                Letters += userKey + ", ";
                document.getElementById("lettersUsed").innerHTML = Letters;

                if (computerWord.indexOf(userKey) >= 0) {
                    for (var i = 0; i < computerWord.length; ++i) {
                        if (userKey === computerWord[i]) {
                            var newGuessedArray = guessedArray.slice(0, i) + userKey + guessedArray.slice(i + 1, guessedArray.length);
                            guessedArray = newGuessedArray;
                            var displayArray = "";
                            for (var j = 0; j < newGuessedArray.length; ++j) {
                                displayArray += newGuessedArray[j] + " ";
                            }
                            document.getElementById("userGuess").innerHTML = "Word: " + displayArray;
                        }
                    }
                    if (guessedArray.indexOf("_") === -1) {
                        win = updateWins(win);
                    }
                }
                else {
                    guessesRemaining--;
                    document.getElementById("guess").innerHTML = "Guesses Remaining: " + guessesRemaining;
                    if (guessesRemaining === 0) {
                        loss = updateLoss(loss);
                    }
                }
            }
        };
    </script>
    </bodytent:>

</html>